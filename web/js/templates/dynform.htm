<form name="dynForm">
    <div class="row col-lg-12">
        <table class="table table-bordered">
            <tr ng-repeat="val in schema">
                <td colspan="2" ng-if="val.type=='spread'">
                    <spread data="data[val.name]" schema="val">
                </td>
                <td class="col-lg-3" ng-if="val.type!='spread'">
                    <h4>{{val.label}}</h4>
                    <p>{{val.help}}</p>
                    <p style="color: red;" ng-show="errors[val.name]">{{errors[val.name]}}</p>
                </td>
                <td ng-if="val.type!='spread'">
                    <multi refer="data[val.name]" schema="val" ng-if="val.options.multi"></multi>
                    <div ng-if="!val.options.multi">
                        <input name="{{val.name}}" type="hidden" ng-if="val.type=='hidden'" ng-model="data[val.name]"><span ng-if="val.type=='hidden'">{{data[val.name]}}</span>
                        <input name="{{val.name}}" type="text" ng-if="val.type=='string'" ng-model="data[val.name]" ng-minlength="val.options.minLength" ng-maxlength="val.options.maxLength" ng-required="val.options.minLength>0">
                        <input name="{{val.name}}" type="number" ng-if="val.type=='num'" ng-model="data[val.name]">
                        <input name="{{val.name}}" type="text" ng-if="val.type=='date'" ng-model="data[val.name]">
                        <input name="{{val.name}}" type="checkbox" ng-if="val.type=='bool'" ng-model="data[val.name]">
                        <select name="{{val.name}}" ng-options="item.id as item.libelle for item in val.options.choices" ng-model="data[val.name]" ng-if="val.type=='select'"></select>
                        <angucompletewrapper id="{{val.name}}" pause="100" selectedobject="data[val.name]" url="{{val.options.url}}/" reverseurl="{{val.options.reverseurl}}" titlefield="label" ng-if="val.type=='xhr'" initial="data[val.name]"></angucompletewrapper>
                        <textarea name="{{val.name}}" ng-if="val.type=='text'" ng-model="data[val.name]"></textarea>
                        <calculated ng-if="val.type=='sum'" refs="val.options.ref" data="data" model="data[val.name]"></calculated>
                    </div>
                    <fileinput ng-if="val.type=='file'" fileids="data[val.name]"></fileinput>

                </td>
            </tr>
        </table>
    </div>
    <div class="row">
        <button class="btn btn-success col-lg-1" type="button" ng-disabled="dynForm.$valid==false" ng-click="save()">Enregistrer</button>
        <button class="btn btn-danger col-lg-offset-11" type="button" ng-if="data.id" ng-click="remove()">Supprimer</button>
    </div>    
</form>
